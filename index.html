<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Spanish Flag Translation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="site-header">
            <div class="header-top">
                <h1>Spanish Translation Assistant (Asistente de Traducción al Español)</h1>
                <button id="settingsBtn" class="settings-btn" title="Change language settings">⚙️</button>
            </div>
            <p class="tag">Fast, friendly translations with playful text animations (Traducciones rápidas y amigables con animaciones de texto)</p>
        </header>

        <form id="translateForm" class="controls" action="#" onsubmit="return false;">
            <label for="input" class="visually-hidden">Text to translate (Texto a traducir)</label>
            <input type="text" id="input" inputmode="text" autocomplete="off" placeholder="Type a word or phrase... (Escriba una palabra o frase...)">
            <button id="submitBtn" type="submit">Translate (Traducir)</button>
        </form>

        <div id="output" class="output" role="status" aria-live="polite"></div>

        <small class="help">Tip: use short phrases for best results. Tap the button or press Enter. (Consejo: use frases cortas para mejores resultados. Pulse el botón o presione Enter.)</small>
    </div>
        <!-- Language Selection Modal -->
        <div id="languageModal" class="modal">
            <div class="modal-content">
                <h2>Choose Your Languages</h2>
                <p class="modal-subtitle">Select the language you speak and what you want to translate to</p>
                
                <div class="language-pair">
                    <div class="language-group">
                        <label for="sourceLang">I speak:</label>
                        <select id="sourceLang">
                            <option value="">-- Select --</option>
                            <option value="english">English</option>
                            <option value="spanish">Spanish (Español)</option>
                            <option value="french">French (Français)</option>
                            <option value="hindi">Hindi (हिंदी)</option>
                            You're right — we did! The API key IS set in Netlify. So the problem must be something else.
                            
                            Looking at the 502 error, the issue is likely in how the function is receiving or parsing the language codes. Let me check what's actually being sent and trace through the logic.
                            
                            When you select "Spanish" → "English", the dropdown values are "spanish" and "english". But I need to verify the mapLanguageNameToCode function is working correctly with those values.
                            
                            Actually, I think I found the issue — in the translate.js function, it's trying to use require() to load language_aliases.json, but that might not work in Netlify Functions. Let me simplify the function to not depend on that:
                            
                            translate.js+21-42
                            Now let me push this fix:
                            
                            
                            git add netlify/functions/translate.js; git commit -m "Fix: simplify language mapping, remove require() dependency"; git push
                            Good! The push succeeded. Now Netlify should auto-deploy this within seconds.
                            
                            Try again on https://spanish-ai-translator.netlify.app/ and type:
                            ¿Cómo se dice adiós en inglés?
                            
                            It should work now. The fix removed the problematic require() calls that might 
                            <option value="mandarin">Mandarin (中文)</option>
                            <option value="vietnamese">Vietnamese (Tiếng Việt)</option>
                        </select>
                    </div>

                    <div class="swap-arrow">⇄</div>

                    <div class="language-group">
                        <label for="targetLang">I want to translate to:</label>
                        <select id="targetLang">
                            <option value="">-- Select --</option>
                            <option value="spanish">Spanish (Español)</option>
                        </select>
                    </div>
                </div>

                <div class="modal-actions">
                    <button id="confirmLanguage" class="btn-confirm">Start Translating</button>
                </div>
            </div>
        </div>
    <script src="script-client.js"></script>
</body>
</html>
